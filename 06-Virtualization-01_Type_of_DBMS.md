## Домашнее задание к занятию "Домашнее задание к занятию "6.1. Типы и структура СУБД"

__Введение__

__Перед выполнением задания вы можете ознакомиться с дополнительными материалами (https://github.com/netology-code/virt-homeworks/blob/master/additional/README.md)__.

__1.	Задача 1__

__Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.
Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:__

__- Электронные чеки в json виде__

__- Склады и автомобильные дороги для логистической компании__

__- Генеалогические деревья__

__- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации__

__- Отношения клиент-покупка для интернет-магазина__

__Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.__

__Решение__

|     Типы сущностей, которые нужно будет хранить в БД       |       Подходящие типы СУБД для каждой сущности        |
|-------------|-------------| 
|     Электронные чеки в json виде  |     СУБД: Документно-ориентированная NoSQL (MongoDB) – в качестве объекта хранения выступает документ в конкретном формате json.    |
|     Склады и автомобильные дороги для логистической компании   |     СУБД: Графовая NoSQL. Названия складов рассмотреть в качестве узлов, а дороги – в качестве ребер графовой структуры.    |
|     Генеалогические деревья    |     СУБД: Сетевая NoSQL – использует иерархическую модель данных, что подойдет для описания родственных связей.    | 
|     Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации    |     СУБД: Ключ-значение NoSQL, где ключ - это идентификатор, а значение – атрибут клиента (пример – Redis).    | 
|     Отношения клиент-покупка для интернет-магазина    |     СУБД: реляционная СУБД. Можно построить много логически связанных таблиц, которые потом связать через ключи.    | 
________________________________________

__2.	Задача 2__

__Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):__

__- Данные записываются на все узлы с задержкой до часа (асинхронная запись)__

__- При сетевых сбоях, система может разделиться на 2 раздельных кластера__

__- Система может не прислать корректный ответ или сбросить соединение__

__А согласно PACELC-теореме, как бы вы классифицировали данные реализации?__

__Решение__

|     Реализация системы       |       Классификация согласно CAP-теоремы        |        Классификация согласно PACELC-теоремы       |
|-------------|-------------|-------------| 
|     Данные записываются на все узлы с задержкой до часа (асинхронная запись)  |     PA – в случае сетевого разделения узлов системы она продолжает отвечать пользователям на запросы, при этом не гарантируя консистентности данных.      |     PA/EС При сетевом разделении система доступна, а при отсутствии – система не смотрит на задержку.     |
|     При сетевых сбоях, система может разделиться на 2 раздельных кластера   |     PA – в случае сетевого разделения узлов системы она продолжает отвечать пользователям на запросы, при этом не гарантируя консистентности данных.    |     PA/EL, т.к. система жертвует консистентностью в угоду доступности.     |
|     Система может не прислать корректный ответ или сбросить соединение    |     PC – в случае сетевого разделения узлов системы она прекращает отвечать пользователям на запросы, данные остаются консистентными.    |     PC/EС, т.к. система жертвует доступностью в угоду консистентности.     | 
________________________________________

__3.	Задача 3__

__Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?__

__Решение:__

В одной системе сочетаться принципы BASE и ACID не могут, т.к. это противоположные принципы в своей сути. BASE-принцип ориентирован на производительность системы (доступность при допустимости неверности данных), а ACID-принцип ориентирован на надежность и сохранность данных (при допустимой недоступности).  По CAP-теореме такие системы будут на разных ребрах «треугольника».
________________________________________

__4.	Задача 4__

__Вам дали задачу написать системное решение, основой которого бы послужили:__

__- фиксация некоторых значений с временем жизни__

__- реакция на истечение таймаута__

__Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?__

__Решение:__

СУБД типа key-value с механизмом pub/sub – например, Redis. 

*Отличие от реляционных СУБД:*
-	более высокая производительность (благодаря хранению данных в оперативной памяти сервера, значительно увеличивается число выполняемых операций);
-	отсутствие языка SQL (Lua-скрипты как альтернатива);
-	гибкость (данные находятся не в жёстких структурах (таблицах), а в более удобных (строки, списки, хеши, множества, сортированные множества), что облегчает работу программисту;
-	лучшая масштабируемость.

*Минусы выбора Redis:*
-	Из-за хранения данных в оперативной памяти – риск потери данных при инфраструктурных инцидентах.
